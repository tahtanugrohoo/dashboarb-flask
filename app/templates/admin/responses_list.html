{% extends "base.html" %}
{% block title %}Data Respons{% endblock %}
{% block content %}
  <h1>Data Respons</h1>

  <form method="get" style="display:flex; gap:10px; flex-wrap:wrap; align-items:end; margin: 12px 0;">
    <div class="field">
      <label>Dari tanggal</label><br>
      <input type="date" name="from" value="{{ date_from }}">
    </div>
    <div class="field">
      <label>Sampai tanggal</label><br>
      <input type="date" name="to" value="{{ date_to }}">
    </div>
    <div class="field">
      <label>Per halaman</label><br>
      <select name="per_page">
        {% for n in [10, 20, 50, 100] %}
          <option value="{{ n }}" {% if per_page == n %}selected{% endif %}>{{ n }}</option>
        {% endfor %}
      </select>
    </div>
    <button class="btn" type="submit">Filter</button>
    <a class="btn" href="{{ url_for('admin.responses_list') }}">Reset</a>
  </form>

  <div style="overflow:auto; border:1px solid #eee; border-radius:12px;">
    <table style="width:100%; border-collapse:collapse;">
      <thead>
        <tr>
          <th style="border-bottom:1px solid #eee; padding:10px; text-align:left;">Waktu Submit</th>
          <th style="border-bottom:1px solid #eee; padding:10px; text-align:left;">Response ID</th>
          <th style="border-bottom:1px solid #eee; padding:10px; text-align:left;">Aksi</th>
        </tr>
      </thead>
      <tbody>
        {% for r in items %}
          <tr>
            <td style="border-bottom:1px solid #f2f2f2; padding:10px;">
              {{ r.submitted_at }}
            </td>
            <td style="border-bottom:1px solid #f2f2f2; padding:10px;">
              {{ r.id }}
            </td>
            <td style="border-bottom:1px solid #f2f2f2; padding:10px;">
              <a href="{{ url_for('admin.response_detail', response_id=r.id) }}">Detail</a>
            </td>
          </tr>
        {% else %}
          <tr><td colspan="3" style="padding:10px;">Belum ada data.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <div style="display:flex; gap:8px; align-items:center; margin-top:12px; flex-wrap:wrap;">
    {% if pagination.has_prev %}
      <a class="btn" href="{{ url_for('admin.responses_list', page=pagination.prev_num, per_page=per_page, from=date_from, to=date_to) }}">Prev</a>
    {% endif %}

    <span>Halaman {{ pagination.page }} / {{ pagination.pages if pagination.pages else 1 }}</span>

    {% if pagination.has_next %}
      <a class="btn" href="{{ url_for('admin.responses_list', page=pagination.next_num, per_page=per_page, from=date_from, to=date_to) }}">Next</a>
    {% endif %}
  </div>
{% endblock %}
